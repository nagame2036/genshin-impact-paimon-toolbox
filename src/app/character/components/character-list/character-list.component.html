<div class="options">
  <app-select class="option" [options]="service.sorts" [value]="service.sort" (changed)="changeSort($event)">
    <span form-label>
      {{ i18n.dict('sort') | translate }}
    </span>
  </app-select>
  <app-multi-select class="option" [options]="service.rarities" [values]="service.rarityFilter"
                    (changed)="filterRarity($event)">
    <span form-label>
      {{ i18n.dict('rarity') | translate }}
    </span>
  </app-multi-select>
  <app-multi-select class="option" [options]="service.elements" [values]="service.elementFilter"
                    (changed)="filterElement($event)">
    <span form-label>
      {{ i18n.dict('element') | translate }}
    </span>
  </app-multi-select>
  <app-multi-select class="option" [options]="service.weapons" [values]="service.weaponFilter"
                    (changed)="filterWeapon($event)">
    <span form-label>
      {{ i18n.dict('weapon') | translate }}
    </span>
  </app-multi-select>
  <div class="actions">
    <app-ring-button class="add-btn" (clicked)="add.emit($event)">
      {{ i18n.module('add') | translate }}
    </app-ring-button>
    <ng-content select="[actions]"></ng-content>
  </div>
</div>
<div class="list">
  <div *ngFor="let item of items" class="overview" [class.selected]="selectedItems.includes(item)"
       (click)="select(item)">
    <app-item-view category="characters" [id]="item.info.id" [rarity]="item.info.rarity"></app-item-view>
    <img class="element-hint" [src]="images.get('elements', item.info.element)"
         [alt]="i18n.dict('elements.' + item.info.element) | translate">
    <img class="weapon-type-hint" [src]="images.get('weapon-types', item.info.weapon)"
         [alt]="i18n.dict('weapon-types.' + item.info.weapon) | translate">
    <table class="item-overview-table">
      <tr>
        <td>
          <b>{{ i18n.dict('constellation') | translate }}</b>
        </td>
        <td>
          {{ item.progress.constellation }}
        </td>
      </tr>
      <tr>
        <td>
          <b>{{ i18n.dict('ascension') | translate }}</b>
        </td>
        <td>
          <app-item-overview-data left="★{{ item.progress.ascension }}" right="★{{ item.plan.ascension }}"
                                  [displayRight]="item.progress.ascension < item.plan.ascension">
          </app-item-overview-data>
        </td>
      </tr>
      <tr>
        <td>
          <b>{{ i18n.dict('level') | translate }}</b>
        </td>
        <td>
          <app-item-overview-data [left]="item.progress.level" [right]="item.plan.level"
                                  [displayRight]="item.progress.level < item.plan.level">
          </app-item-overview-data>
        </td>
      </tr>
      <tr *ngFor="let talent of item.info.talentsUpgradable; let i = index">
        <td>
          <b>{{ i18n.dict('talent-types.' + talent % 10) | translate }}</b>
        </td>
        <td>
          <app-item-overview-data [left]="item.progress.talents[talent]" [right]="item.plan.talents[talent]"
                                  [displayRight]="item.progress.talents[talent] < item.plan.talents[talent]">
          </app-item-overview-data>
        </td>
      </tr>
    </table>
  </div>
</div>
