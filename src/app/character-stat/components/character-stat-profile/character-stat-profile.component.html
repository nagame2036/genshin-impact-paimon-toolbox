<div style="margin-top: 24px">
  <div fxLayout="row">
    <app-ascension-level-select label="character" (levelChange)="level.copyFrom($event); calc(true)">
    </app-ascension-level-select>
    <mat-form-field appearance="outline" floatLabel="always" class="app-form-field">
      <mat-label>{{ i18n.module('dmg-type') | translate }}</mat-label>
      <mat-select [formControl]="dmgType" (selectionChange)="calc(true)">
        <mat-option *ngFor="let t of dmgTypes" [value]="t">
          <span [translate]="i18n.dict('dmg')"
                [translateParams]="{type: i18n.dict('elements.' + t) | translate}">
          </span>
        </mat-option>
      </mat-select>
    </mat-form-field>
  </div>
  <mat-divider inset style="margin-top: 8px"></mat-divider>
  <div fxLayout="row" style="margin-top: 4px">
    <div fxLayout="column" *ngFor="let s of stat">
      <mat-form-field *ngFor="let f of s.fields, let i = index" class="app-form-field"
                      (change)="f.correct(); calc(s.label == 'current')"
                      (input)="calc(s.label == 'current')" appearance="outline" floatLabel="always">
        <mat-label [translate]="i18n.module(s.labels[i])" [translateParams]="{
                      label: i18n.module(s.label) | translate,
                      type: i18n.dict('elements.' + dmgType.value) | translate
                   }">
        </mat-label>
        <input [formControl]="f.control" [max]="f.max" [min]="f.min" matInput required type="number"/>
        <div *ngIf="f.suffix" matSuffix>{{ f.suffix }}</div>
      </mat-form-field>
      <mat-form-field *ngFor="let f of s.dmgFields, let i = index"
                      appearance="outline" floatLabel="always" class="app-form-field">
        <mat-label [translate]="i18n.module(s.dmgLabels[i])"
                   [translateParams]="{label: i18n.module(s.label) | translate}">
        </mat-label>
        <input [value]="f() | number: '1.1-1'" matInput/>
      </mat-form-field>
      <button mat-stroked-button class="copy-button" color="accent" (click)="copy(s)">
        <span>{{ i18n.module('copy-to') | translate: {label: i18n.module(s.copyLabel) | translate} }}</span>
      </button>
    </div>
    <div fxLayout="column">
      <div *ngFor="let f of comparer.fields" class="app-form-field">
        <mat-form-field appearance="outline" floatLabel="always">
          <mat-label>{{ i18n.module('change') | translate }}</mat-label>
          <input [value]="comparer.calc(f) | number: '1.1-1'" matInput readonly/>
          <div matSuffix>%</div>
        </mat-form-field>
      </div>
    </div>
  </div>
</div>
