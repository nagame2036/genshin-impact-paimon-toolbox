<h2 mat-dialog-title>{{ i18n('add') | translate }}</h2>
<mat-divider></mat-divider>
<div mat-dialog-content>
  <button *ngIf="selected" @formTrigger class="expand-list-btn" (click)="reset()">
    {{ i18n('expand-list') | translate }}
  </button>
  <div *ngIf="!selected" @listTrigger>
    <app-character-list [characters]="characters" (selected)="select($event)"></app-character-list>
  </div>
  <div *ngIf="selected" @formTrigger class="add-character-form" fxLayout="column" fxLayoutAlign="center center">
    <div style="width: 100px">
      <app-item-view category="characters" [id]="selected.id" [rarity]="selected.rarity"></app-item-view>
    </div>
    <app-ascension-level-select #ascension [horizontal]="false" [width]="320"
                                label="character" (levelChange)="setLevel($event)">
    </app-ascension-level-select>
    <mat-form-field class="app-form-field" appearance="outline" floatLabel="always">
      <mat-label>{{ i18nDict('constellation') | translate }}</mat-label>
      <mat-select [(value)]="constellation">
        <mat-option *ngFor="let level of constellationLevels" [value]="level">{{ level }}</mat-option>
      </mat-select>
    </mat-form-field>
    <mat-form-field *ngFor="let talent of talentsData; let i = index"
                    class="app-form-field" appearance="outline" floatLabel="always">
      <mat-label [translate]="i18nDict('talent-labels.' + talent.id % 10)"
                 [translateParams]="{ name: i18nDict('talents.' + talent.id) | translate }">
      </mat-label>
      <mat-select [(value)]="talent.level">
        <mat-option *ngFor="let level of talentService.availableTalentLevels(level.ascension)" [value]="level">
          {{ level }}
        </mat-option>
      </mat-select>
    </mat-form-field>
  </div>
</div>
<div *ngIf="selected" mat-dialog-actions>
  <button mat-flat-button color="primary" [disabled]="!selected || !level " (click)="add()">
    {{ i18n('add') | translate }}
  </button>
</div>
